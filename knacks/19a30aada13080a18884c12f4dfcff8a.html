<p><b>Publicado:</b> Shawn Brink</p>

<p><b>Fecha:</b> 25 de febrero de 2024</p>

<h1>üèÅ Objetivos</h1>

<p>Esta gu√≠a muestra como agregar o remover la opci√≥n <code>Establecer propietario</code> al men√∫ contextual de todos los ficheros, carpetas y unidades para cualquier usuario en Windows 10. Esto permite tomar posesi√≥n inmediata de un fichero, carpeta, unidad o contenidos cambiando el propietario al usuario actual y otorgar el SID <code>Owner_Rights</code> de permiso de acceso completo al propietario actual.</p>

<p>Al hacer clic derecho o presionar y mantener presionado en un fichero, carpeta o unidad y hace clic en <code>Establecer propietario</code>, un aviso <b>UAC</b> le solicitar√° permiso para ejecutarse.</p>

<div class='div-featured'>
<span class='img-featured'>‚ÑπÔ∏è</span>
<span class='txt-featured'>Si un usuario inicia sesi√≥n como <b>administrador</b>, el usuario simplemente puede hacer clic en <code>Si</code> para aprobar y tomar posesi√≥n. El propietario del fichero, carpeta o unidad se cambiar√° a la cuenta de usuario actual y se establecer√°n permisos para permitir el control total del propietario (SID <code>Owner_Rights</code>) del fichero, la carpeta o la unidad.
</span></div>

<div class='div-featured'>
<span class='img-featured'>‚ÑπÔ∏è</span>
<span class='txt-featured'>Si un usuario inicia sesi√≥n como <b>usuario est√°ndar</b>, el usuario necesitar√° ingresar la contrase√±a de un administrador para aprobar el cambio. El propietario del fichero, carpeta o unidad se cambiar√° a la cuenta seleccionada del administrador y no al usuario est√°ndar y se establecer√°n permisos para permitir el control total del propietario (SID <code>Owner_Rights</code>) del fichero, la carpeta o la unidad al administrador.
</span></div>

<h2>‚ö†Ô∏è Limitaciones</h2>

<ul>
  <li>Debe ser <b>administrador</b> para poder agregar, eliminar y usar la opci√≥n <code>Establecer propietario</code> del men√∫ contextual.</li>

  <li>La opci√≥n <code>Establecer propietario</code> en el men√∫ contextual no est√° disponible si hace clic derecho en la unidad <code>C:\</code> o las carpetas <code>C:\Program Files</code>, <code>C:\Program Files (x86)</code>, <code>C:\ProgramData</code>, <code>C:\Users</code> y <code>C:\Windows</code>. Esta limitaci√≥n existe ya que modificar la propiedad de la unidad C:\ o estas carpetas de sistema puede provocar inestabilidad en Windows, pues tambi√©n tomar√≠a posesi√≥n de todo su contenido al mismo tiempo. Si puede usar la opci√≥n <code>Establecer propietario</code> en el men√∫ contextual en ficheros y carpetas dentro de las ubicaciones arriba mencionadas y en todas las unidades que no sean las unidades C y FAT32.</li>

  <li>Los ficheros ejecutables (<b>EXE</b>, <b>CMD</b>, <b>MSI</b>) tendr√°n la opci√≥n <code>Establecer propietario</code> en el men√∫ contextual sin reemplazar la de <code>Ejecutar como administrador</code>.</li>

  <li>Tomar posesi√≥n de una unidad <b>FAT32</b> no funciona y obtendr√° un error indicando que los permisos de fichero solo son compatibles con las unidades <b>NTFS</b> y <b>REFS</b>.</li>

</ul>

<h1>üë®üèΩ‚Äçüè´ Instrucciones</h1>

<h2>Seleccionar una opci√≥n: <b>Agregar</b>, <b>Agregar con pausa</b> o <b>Eliminar</b></h2>

<ul class='lst-task'>
  <li><label class='chk-task'></label><span><b>Agregar la opci√≥n <code>Establecer propietario</code> al men√∫ contextual.</b> Disponibles dos opciones: <b>a)</b> Acceso directo o <b>b)</b> Mediante <code>Shift + Clic derecho</code> al men√∫ contextual.</span></li>

</ul>

<ul>
  <li><b><code>Add_Take_Ownership_to_context_menu.reg</code></b></li>

</ul>

<div class='div-code'><button class='btn-code'>Copiar</button><pre><code class='txt-code'>Windows Registry Editor Version 5.00

; Created by: Shawn Brink
; Created on: January 28, 2015
; Updated on: February 25, 2024
; Tutorial: https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html

[-HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\*\shell\runas]

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
@="Establecer propietario"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"NeverDefault"=""

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l' -Verb runAs\""
"IsolatedCommand"= "powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l' -Verb runAs\""

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership]
@="Establecer propietario"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\Users\" OR System.ItemPathDisplay:=\"C:\\ProgramData\" OR System.ItemPathDisplay:=\"C:\\Windows\" OR System.ItemPathDisplay:=\"C:\\Windows\\System32\" OR System.ItemPathDisplay:=\"C:\\Program Files\" OR System.ItemPathDisplay:=\"C:\\Program Files (x86)\")"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q') -Verb runAs\""
"IsolatedCommand"="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q') -Verb runAs\""

[HKEY_CLASSES_ROOT\Drive\shell\runas]
@="Establecer propietario"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\\")"

[HKEY_CLASSES_ROOT\Drive\shell\runas\command]
@="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c"
"IsolatedCommand"="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c"
</code></pre></div>

<p><a target='_blank' rel='noopener noreferrer' href='../assets/Add_Take_Ownership_to_context_menu.reg'>Add_Take_Ownership_to_context_menu.reg</a></p>

<ol>
  <li><b>Mediante <code>Shift + Clic derecho</code></b>. Descargar el fichero o crear un fichero de texto con la extensi√≥n <code>.reg</code> y este contenido:</li>

<ul>
  <li><b><code>Add_Shift+Right-Click_Take_Ownership_to_context_menu.reg</code></b></li>

</ul>

<div class='div-code'><button class='btn-code'>Copiar</button><pre><code class='txt-code'>Windows Registry Editor Version 5.00

; Created by: Shawn Brink
; Created on: January 28, 2015
; Updated on: February 25, 2024
; Tutorial: https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html

[-HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\*\shell\runas]

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
@="Establecer propietario"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"NeverDefault"=""

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l' -Verb runAs\""
"IsolatedCommand"= "powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l' -Verb runAs\""

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership]
@="Establecer propietario"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\Users\" OR System.ItemPathDisplay:=\"C:\\ProgramData\" OR System.ItemPathDisplay:=\"C:\\Windows\" OR System.ItemPathDisplay:=\"C:\\Windows\\System32\" OR System.ItemPathDisplay:=\"C:\\Program Files\" OR System.ItemPathDisplay:=\"C:\\Program Files (x86)\")"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q') -Verb runAs\""
"IsolatedCommand"="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q') -Verb runAs\""

[HKEY_CLASSES_ROOT\Drive\shell\runas]
@="Establecer propietario"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\\")"

[HKEY_CLASSES_ROOT\Drive\shell\runas\command]
@="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c"
"IsolatedCommand"="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c"
</code></pre></div>

</ol>

<p><a target='_blank' rel='noopener noreferrer' href='../assets/Add_ShiftRight-Click_Take_Ownership_to_context_menu.reg'>Add_Shift+Right-Click_Take_Ownership_to_context_menu.reg</a></p>

<ul class='lst-task'>
  <li><label class='chk-task'></label><span><b>Agregar la opci√≥n <code>Establecer propietario</code> con pausa al men√∫ contextual.</b> Disponibles dos opciones: <b>a)</b> Acceso directo o <b>b)</b> Mediante <code>Shift + Clic derecho</code> al men√∫ contextual.</span></li>

</ul>

<div class='div-featured'>
<span class='img-featured'>‚ö†Ô∏è</span>
<span class='txt-featured'>Esta opci√≥n detiene el comando cuando usa la opci√≥n <code>Establecer propietario</code> en el men√∫ contextual para poder ver los resultados del comando. Esto es √∫til para verificar si cambi√≥ la propiedad y los permisos se procesaron con √©xito.
</span></div>

<ol>
  <li><b>Acceso directo.</b> Descargar el fichero o crear un fichero de texto con la extensi√≥n <code>.reg</code> y este contenido:</li>

<ul>
  <li><b><code>Add_Take_Ownership_with_Pause_to_context_menu.reg</code></b></li>

</ul>

<div class='div-code'><button class='btn-code'>Copiar</button><pre><code class='txt-code'>Windows Registry Editor Version 5.00

; Created by: Shawn Brink
; Created on: January 28t, 2015
; Updated on: February 25, 2024
; Tutorial: https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html

[-HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\*\shell\runas]

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
@="Establecer propietario"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"NeverDefault"=""

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l & pause' -Verb runAs\""
"IsolatedCommand"= "powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l & pause' -Verb runAs\""

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership]
@="Establecer propietario"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\Users\" OR System.ItemPathDisplay:=\"C:\\ProgramData\" OR System.ItemPathDisplay:=\"C:\\Windows\" OR System.ItemPathDisplay:=\"C:\\Windows\\System32\" OR System.ItemPathDisplay:=\"C:\\Program Files\" OR System.ItemPathDisplay:=\"C:\\Program Files (x86)\")"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q & pause') -Verb runAs\""
"IsolatedCommand"="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q & pause') -Verb runAs\""

[HKEY_CLASSES_ROOT\Drive\shell\runas]
@="Establecer propietario"
"Extended"=-
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\\")"

[HKEY_CLASSES_ROOT\Drive\shell\runas\command]
@="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c & Pause"
"IsolatedCommand"="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c & Pause"
</code></pre></div>

</ol>

<p><a target='_blank' rel='noopener noreferrer' href='../assets/Add_Take_Ownership_with_Pause_to_context_menu.reg'>Add_Take_Ownership_with_Pause_to_context_menu.reg</a></p>

<ol>
  <li><b>Mediante <code>Shift + Clic derecho</code></b>. Descargar el fichero o crear un fichero de texto con la extensi√≥n <code>.reg</code> y este contenido:</li>

<ul>
  <li><b><code>Add_Shift+Right-Click_Take_Ownership_with_Pause_to_context_menu.reg</code></b></li>

</ul>

<div class='div-code'><button class='btn-code'>Copiar</button><pre><code class='txt-code'>Windows Registry Editor Version 5.00

; Created by: Shawn Brink
; Created on: January 28, 2015
; Updated on: February 25, 2024
; Tutorial: https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html

[-HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\*\shell\runas]

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
@="Establecer propietario"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"NeverDefault"=""

[HKEY_CLASSES_ROOT\*\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l & pause' -Verb runAs\""
"IsolatedCommand"= "powershell -windowstyle hidden -command \"Start-Process cmd -ArgumentList '/c takeown /f \\\"%1\\\" && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l & pause' -Verb runAs\""

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership]
@="Establecer propietario"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\Users\" OR System.ItemPathDisplay:=\"C:\\ProgramData\" OR System.ItemPathDisplay:=\"C:\\Windows\" OR System.ItemPathDisplay:=\"C:\\Windows\\System32\" OR System.ItemPathDisplay:=\"C:\\Program Files\" OR System.ItemPathDisplay:=\"C:\\Program Files (x86)\")"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"

[HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership\command]
@="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q & pause') -Verb runAs\""
"IsolatedCommand"="powershell -windowstyle hidden -command \"$Y = ($null | choice).Substring(1,1); Start-Process cmd -ArgumentList ('/c takeown /f \\\"%1\\\" /r /d ' + $Y + ' && icacls \\\"%1\\\" /grant *S-1-3-4:F /t /c /l /q & pause') -Verb runAs\""

[HKEY_CLASSES_ROOT\Drive\shell\runas]
@="Establecer propietario"
"Extended"=""
"HasLUAShield"=""
"NoWorkingDirectory"=""
"Position"="middle"
"AppliesTo"="NOT (System.ItemPathDisplay:=\"C:\\\")"

[HKEY_CLASSES_ROOT\Drive\shell\runas\command]
@="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c & Pause"
"IsolatedCommand"="cmd.exe /c takeown /f \"%1\\\" /r /d y && icacls \"%1\\\" /grant *S-1-3-4:F /t /c & Pause"
</code></pre></div>

</ol>

<p><a target='_blank' rel='noopener noreferrer' href='../assets/Add_ShiftRight-Click_Take_Ownership_with_Pause_to_context_menu.reg'>Add_Shift+Right-Click_Take_Ownership_with_Pause_to_context_menu.reg</a></p>

<ul class='lst-task'>
  <li><label class='chk-task'></label><span><b>Eliminar la opci√≥n <code>Establecer propietario</code> del men√∫ contextual.</b> Esta es la opci√≥n predeterminada.</span></li>

</ul>

<ul>
  <li><b><code>Remove_Take_Ownership_from_context_menu.reg</code></b></li>

</ul>

<div class='div-code'><button class='btn-code'>Copiar</button><pre><code class='txt-code'>Windows Registry Editor Version 5.00

; Created by: Shawn Brink
; Created on: January 28, 2015
; Updated on: January 11, 2021
; Tutorial: https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html

[-HKEY_CLASSES_ROOT\*\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\*\shell\runas]
[-HKEY_CLASSES_ROOT\Directory\shell\TakeOwnership]
[-HKEY_CLASSES_ROOT\Drive\shell\runas]
</code></pre></div>

<p><a target='_blank' rel='noopener noreferrer' href='../assets/Remove_Take_Ownership_from_context_menu.reg'>Remove_Take_Ownership_from_context_menu.reg</a></p>

<h2>Insertar la configuraci√≥n seleccionada al Registro</h2>

<ul class='lst-task'>
  <li><label class='chk-task'></label><span>Guardar el fichero <code>.reg</code> seleccionado.</span></li>

  <li><label class='chk-task'></label><span>En el Explorador de archivos, hacer doble clic o ejecutar con permisos de administrador el fichero <code>.reg</code> para insertar la configuraci√≥n al Registro.</span></li>

  <li><label class='chk-task'></label><span>Cuando se le solicite, seleccione <code>Ejecutar</code> ‚Üí <code>S√≠</code> (UAC) ‚Üí <code>S√≠</code> y <code>Aceptar</code> para autorizar la acci√≥n.</span></li>

  <li><label class='chk-task'></label><span><b>Opcional</b>. Si desea, puede eliminar el fichero <code>.reg</code> seleccionado.</span></li>

</ul>

<h1>‚úÖ Notas</h1>

<ul>
  <li>Si desea tener una ubicaci√≥n personalizada fuera del men√∫ contextual, puede publicar una solicitud en la <a target='_blank' rel='noopener noreferrer' href='https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html'>p√°gina web del tutorial</a>. El autor le entregar√° un fichero <code>.reg</code> personalizado.</li>

  <li>Para obtener una versi√≥n de Windows 11 de este tutorial, consulte (en ingl√©s): <a target='_blank' rel='noopener noreferrer' href='https://www.elevenforum.com/t/add-take-ownership-to-context-menu-in-windows-11.1230'>Agregar o remover la toma de propiedad de ficheros al men√∫ contextual en Windows 11</a>.</li>

</ul>

<h1>üéûÔ∏è Videos</h1>

<h1>üîó Enlaces relacionados</h1>

<p><a target='_blank' rel='noopener noreferrer' href='https://www.tenforums.com/tutorials/3841-add-take-ownership-context-menu-windows-10-a.html'>Add Take Ownership to Context Menu in Windows 10</a></p>

